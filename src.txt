struct device_mpfr { 
    mpfr_prec_t mpfr_prec; 
    mpfr_exp_t mpfr_exp; 
    mpz_t mpfr_d; 
    };

void mpfr_get_mantissa(const mpfr_t& src, mpz_t mantissa) {
    assert(mantissa != NULL);
    mpz_t rop;
    mpz_init(rop);  // Initialize the mpz_t object
    mpfr_exp_t exp = mpfr_get_z_2exp(rop, src);  // Get mantissa and exponent
    mpz_set(mantissa, rop);
    mpz_clear(rop);
}

void mpfr_to_device_mpfr(const mpfr_t& src, device_mpfr* deviceptr) {
    deviceptr->mpfr_prec = mpfr_get_prec(src);
    deviceptr->mpfr_exp = mpfr_get_exp(src);
    mpfr_get_mantissa(src, deviceptr->mpfr_d);
}

void deviceMpfrToMpfr(const device_mpfr* deviceFloat, mpfr_t& result) {
    // Initialize mpfr_t with the precision of the DeviceMpfr object
    mpfr_init2(result, deviceFloat->mpfr_prec);
    mpfr_set_exp(result, deviceFloat->mpfr_exp);
    mpfr_set_z(result, deviceFloat->mpfr_d, MPFR_RNDN);
}